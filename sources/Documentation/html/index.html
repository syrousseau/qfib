<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Qfib: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="qfib-small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Qfib
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Qfib Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="image">
<img src="qfib.png" width="200"/>
</div>
<h1>Overview</h1>
<p>This software compress and decompress dMRI brain tractograms. Those tractograms should have been generated using a method that ensure a constant stepsize along each individual fiber. This property can be checked using our software. We currently can compress .tck files, and decompressed .qfib files. This is the C++ reference implementation for the paper:</p>
<p>&gt;**QFib: Fast and Efficient Brain Tractogram Compression** <br />
 <em>Corentin Mercier*, Sylvain Rousseau*, Pietro Gori, Isabelle Bloch and Tamy Boubekeur.</em><br />
 (* C. Mercier Â· S. Rousseau contributed equally to this work)<br />
 NeuroInformatics 2020<br />
 DOI: 10.1007/s12021-020-09452-0<br />
</p>
<p>This is not the exact same version of the source code that is used to measure performance for the corresponding paper. Performance might have been slightly affected during refactoring.</p>
<p>Copyright(C) 2019-2020 Corentin Mercier, Sylvain Rousseau, Pietro Gori, Isabelle Bloch and Tamy Boubekeur</p>
<p>All right reserved</p>
<h2>Release Notes</h2>
<h3>v1.1</h3>
<ul>
<li>Corrected an error in the out-of-core version of the algorithm that resulted in incorrect files</li>
<li>Added the possibility of computing the error in out-of-core mode</li>
<li>Removed OpenMP, using C++ threads instead (OpenMP can still be used, see compile options)</li>
</ul>
<h3>v1.0</h3>
<ul>
<li>Initial version</li>
</ul>
<h1>Building and Running</h1>
<p>This program uses CMake. It has been tested on Linux using Ubuntu 18.04 (LTS) with gcc 7.3 and Ubuntu 16.04 (LTS) with gcc 5.4. Building on Windows 10 or MacOS has not been tested. Direct compatibility with visual c++ is not ensured as we are using getopt.h (do not use OpenMP with Windows, as their version is too old). The easiest way to get a working version <em>under</em> windows is to use WSL. To build the source code, you can use the following commands:</p>
<div class="fragment"><div class="line">mkdir qfib/build</div><div class="line">cd qfib/build</div><div class="line">cmake -DCMAKE_BUILD_TYPE=Release ..</div><div class="line">make</div></div><!-- fragment --><p>By default, the code uses C++ threads for parallelization, however, it is possible to use OpenMP instead by using the cmake flag <code>-DUSE_OPENMP=true</code>. From our testings, C++ threads deliver equivalent - if not better - performance.</p>
<p>Then, you can simply compress a file with the default parameters (8 bits spherical Fibonacci, incore, with data validity verification) using the following command line:</p>
<div class="fragment"><div class="line">./qfib path/file.tck</div></div><!-- fragment --><p>and decompress a file in the same way </p><div class="fragment"><div class="line">./qfib path/file.qfib</div></div><!-- fragment --><p> It is not necessary to indicate the parameters of the compression during decompression as these informations are stored in the compressed file. Some options can be activated to improve the performances (remove checkings), modify the quantization method or precision, or to display more information. These options can be activated using the following flags:</p>
<div class="fragment"><div class="line">-u or --out_of_core: force out-of-core, in case there is not enough RAM (default is in core)</div><div class="line">-o or --octahedral: force octahedral quantification, only for compression (default is fibonacci)</div><div class="line">-b or --16bits: compress using 16 bits (default is 8 bits)</div><div class="line">-t or --timings: display compression and decompression times</div><div class="line">-e or --error: display the error when compressing fibers</div><div class="line">-d or --detailed-error: display a detailed error when compressing fibers</div><div class="line">-v or --verbose: display additional details</div><div class="line">-n or --no-verif: no verification of data constant stepsize for better performance</div><div class="line">-f or --fa + filename: compare fa values after compression and decompression</div><div class="line">-c or --compression-ratio: display compression ratio when compressing fibers</div><div class="line">-h or --help: access to this help</div></div><!-- fragment --><h1>Docker</h1>
<p>To use docker with the code, you can use the following commands: </p><div class="fragment"><div class="line">sudo docker build --rm -f C++Base -t cpp-build-base:1.0 .</div><div class="line">sudo docker build --rm -f QfibDocker -t qfib:1.0 .</div><div class="line">sudo docker run -v /path/to/folder/containing/the/fibers:/src/data qfib:1.0 ../data/file -o -t</div></div><!-- fragment --><h1>Authors</h1>
<ul>
<li><a href="https://perso.telecom-paristech.fr/comercier/"><b>Corentin Mercier</b></a></li>
<li><a href="https://perso.telecom-paristech.fr/srousseau/"><b>Sylvain Rousseau</b></a></li>
<li><a href="https://perso.telecom-paristech.fr/bloch/"><b>Isabelle Bloch</b></a></li>
<li><a href="https://perso.telecom-paristech.fr/pgori/"><b>Pietro Gori</b></a></li>
<li><a href="https://perso.telecom-paristech.fr/boubek"><b>Tamy Boubekeur</b></a></li>
</ul>
<h1>License</h1>
<p>This project is licensed under the MIT license - see the [LICENSE](LICENSE) file for details.</p>
<p>All right reserved. The Authors</p>
<h1>Data</h1>
<p>Data can be generated using <a href="https://www.mrtrix.org">MrTrix</a>.</p>
<p>Some examples are available here: <a href="https://gitlab.com/comercier/qfib-data">https://gitlab.com/comercier/qfib-data</a> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
